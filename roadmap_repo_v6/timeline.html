<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Road map – Timeline globale</title>
<link rel="stylesheet" href="assets/css/style.css">
<style>
  .timeline-v{display:flex; flex-direction:column; gap:1rem; margin-bottom:1rem; position:relative}
  .tl-item{display:grid; grid-template-columns:140px 1fr; gap:1rem; align-items:start}
  .tl-date{color:#e5e7eb; font-weight:700; padding-top:.4rem}
  .tl-card{position:relative}
  .tl-card:before{content:""; position:absolute; left:-.75rem; top:.6rem; width:10px; height:10px; background:linear-gradient(90deg,#22d3ee,#a78bfa); border-radius:50%}
  .controls{display:flex; gap:.5rem; flex-wrap:wrap; margin-bottom:1rem; align-items:center}
  select{padding:.6rem .8rem; border-radius:.6rem; border:1px solid #334155; background:#0b1220; color:#e5e7eb}
  .hint{color:#94a3b8}
  .badge2{font-size:.72rem; padding:.15rem .45rem; border-radius:.45rem; border:1px solid #334155; background:#0b1220; margin-right:.35rem}
  .links{display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem}
  .mini{font-size:.82rem}
</style>
</head>
<body>
  <header>
    <div class="wrap brand">
      <h1><img src="assets/img/logo.svg" alt="" style="vertical-align:middle;margin-right:.5rem"/>Road map – Timeline globale</h1>
      <nav>
        <a class="navlink" href="index.html">Accueil</a>
        <a class="navlink" href="timeline.html">Timeline</a>
        <a class="navlink" href="flow.html">Flow</a>
        <a class="navlink" href="edu.html">Sciences de l’éducation</a>
        <a class="navlink" href="oulpan.html">Oulpan hébreu</a>
        <a class="navlink" href="vae.html">VAE Paris 8</a>
        <a class="navlink" href="master.html">Candidature Master (HUJI)</a>
        <a class="navlink" href="ong.html">Projet ONG</a>
        <a class="navlink" href="sport.html">Sport & santé</a>
        <a class="navlink" href="english.html">Anglais</a>
        <a class="navlink" href="car.html">Permis voiture</a>
        <a class="navlink" href="moto.html">Permis moto</a>
        <a class="navlink" href="photo.html">Photographie</a>
        <a class="navlink" href="guitar.html">Guitare</a>
        <a class="navlink" href="dj.html">DJ / Platines</a>
        <a class="btn" id="exportCSV">Exporter progression (CSV)</a>
      </nav>
    </div>
  </header>
  <main>
    <div class="subtitle">Plan global **sans tout lancer d’un coup** — fin impérative : <strong>juillet 2026</strong>. Choisis ton mois de démarrage ci-dessous.</div>

    <div class="controls">
      <label for="start" class="hint mini">Mois de départ :</label>
      <select id="start">
        <option value="2025-09">Septembre 2025 (léger)</option>
        <option value="2025-10" selected>Octobre 2025 (recommandé)</option>
        <option value="2025-11">Novembre 2025</option>
        <option value="2025-12">Décembre 2025</option>
        <option value="2026-01">Janvier 2026</option>
      </select>
      <span class="hint mini">Fin fixée : <strong>Juillet 2026</strong> (jalons auto-répartis)</span>
    </div>

    <div class="card">
      <div class="month"><h2>Roadmap mensuelle</h2><span class="badge">Sept. 2025 → Juil. 2026</span></div>
      <div class="timeline-v" id="tl"></div>
    </div>
  </main>
  <footer>Conçu pour Ruben • © 2025</footer>

  <script type="module">
    import { exportAllCSV } from './assets/js/app.js';
    document.getElementById('exportCSV').addEventListener('click', ()=>{
      exportAllCSV('progression.csv',[
        {key:'edu_progress', label:'Education'},
        {key:'oulpan_progress', label:'Oulpan'},
        {key:'vae_progress', label:'VAE'},
        {key:'master_progress', label:'Master'},
        {key:'ong_progress', label:'ONG'},
        {key:'sport_progress', label:'Sport'},
        {key:'english_progress', label:'English'},
        {key:'car_progress', label:'Permis voiture'},
        {key:'moto_progress', label:'Permis moto'},
        {key:'photo_progress', label:'Photo'},
        {key:'guitar_progress', label:'Guitare'},
        {key:'dj_progress', label:'DJ'}
      ]);
    });

    const end = { y:2026, m:7 }; // July 2026
    const baseMonths = [
      { y:2025, m:9,  label:'Sept. 2025' },
      { y:2025, m:10, label:'Oct. 2025' },
      { y:2025, m:11, label:'Nov. 2025' },
      { y:2025, m:12, label:'Déc. 2025' },
      { y:2026, m:1,  label:'Janv. 2026' },
      { y:2026, m:2,  label:'Fév. 2026' },
      { y:2026, m:3,  label:'Mars 2026' },
      { y:2026, m:4,  label:'Avr. 2026' },
      { y:2026, m:5,  label:'Mai 2026' },
      { y:2026, m:6,  label:'Juin 2026' },
      { y:2026, m:7,  label:'Juil. 2026' },
    ];

    // Backbone tasks per month (staggered, not everything at once)
    const sequence = [
      { label:'Sept. 2025', tasks:[
        {txt:'Oulpan Alef (modules 1–2) — léger', links:[{t:'Oulpan', href:'oulpan.html'}]},
        {txt:'Code (ETG) : 1 série/jour', links:[{t:'Permis voiture', href:'car.html'}]},
        {txt:'Sport : mise en place habitude 3×/sem.', links:[{t:'Sport', href:'sport.html'}]},
      ]},
      { label:'Oct. 2025', tasks:[
        {txt:'Éducation L1 – Fondations', links:[{t:'Éducation', href:'edu.html'}]},
        {txt:'Oulpan Alef (3–4)', links:[{t:'Oulpan', href:'oulpan.html'}]},
        {txt:'VAE : informations & éligibilité', links:[{t:'VAE', href:'vae.html'}]},
      ]},
      { label:'Nov. 2025', tasks:[
        {txt:'Éducation : Psycho/apprentissages', links:[{t:'Éducation', href:'edu.html'}]},
        {txt:'Oulpan Alef (5–6)', links:[{t:'Oulpan', href:'oulpan.html'}]},
        {txt:'Code : examens blancs (objectif ≥ 36/40)', links:[{t:'Permis voiture', href:'car.html'}]},
        {txt:'Guitare – démarrage (10–15 min/j)', links:[{t:'Guitare', href:'guitar.html'}]},
      ]},
      { label:'Déc. 2025', tasks:[
        {txt:'Éducation : Philo/Anthropo/Pédagogies', links:[{t:'Éducation', href:'edu.html'}]},
        {txt:'Oulpan Alef (7–8) – Projet', links:[{t:'Oulpan', href:'oulpan.html'}]},
        {txt:'ETG (code) — passer l’examen', links:[{t:'Permis voiture', href:'car.html'}]},
        {txt:'Conduite : démarrage (4–6h)', links:[{t:'Permis voiture', href:'car.html'}]},
      ]},
      { label:'Janv. 2026', tasks:[
        {txt:'Éducation L2 – École & société', links:[{t:'Éducation', href:'edu.html'}]},
        {txt:'Oulpan Bet – présent/hifil', links:[{t:'Oulpan', href:'oulpan.html'}]},
        {txt:'Anglais : diagnostic & plan', links:[{t:'Anglais', href:'english.html'}]},
        {txt:'Photo : mini-projet (10 photos)', links:[{t:'Photo', href:'photo.html'}]},
      ]},
      { label:'Fév. 2026', tasks:[
        {txt:'Éducation : Méthodo recherche & stats', links:[{t:'Éducation', href:'edu.html'}]},
        {txt:'Conduite : heures ciblées (urbain/manœuvres)', links:[{t:'Permis voiture', href:'car.html'}]},
        {txt:'Master HUJI : SoP (brouillon) + CV', links:[{t:'Master', href:'master.html'}]},
      ]},
      { label:'Mars 2026', tasks:[
        {txt:'Éducation L3 – Grands pédagogues', links:[{t:'Éducation', href:'edu.html'}]},
        {txt:'Oulpan Gimel – hifil/piel', links:[{t:'Oulpan', href:'oulpan.html'}]},
        {txt:'VAE : Livret 2 – rédaction', links:[{t:'VAE', href:'vae.html'}]},
      ]},
      { label:'Avr. 2026', tasks:[
        {txt:'Éducation L3 – Enjeux actuels', links:[{t:'Éducation', href:'edu.html'}]},
        {txt:'Oulpan Dalet – gestion de groupe', links:[{t:'Oulpan', href:'oulpan.html'}]},
        {txt:'DJ : routine & mini set', links:[{t:'DJ', href:'dj.html'}]},
        {txt:'Permis voiture : prépa examen pratique', links:[{t:'Permis voiture', href:'car.html'}]},
      ]},
      { label:'Mai 2026', tasks:[
        {txt:'Éducation L3 – Synthèse & pro', links:[{t:'Éducation', href:'edu.html'}]},
        {txt:'Oulpan He – presse & rédaction', links:[{t:'Oulpan', href:'oulpan.html'}]},
        {txt:'IELTS/TOEFL : intensif & passage', links:[{t:'Anglais', href:'english.html'}]},
        {txt:'VAE : finalisation Livret 2', links:[{t:'VAE', href:'vae.html'}]},
      ]},
      { label:'Juin 2026', tasks:[
        {txt:'VAE : soutenance / jury', links:[{t:'VAE', href:'vae.html'}]},
        {txt:'Master HUJI : dossier complet & soumission', links:[{t:'Master', href:'master.html'}]},
        {txt:'Permis voiture : examen pratique (fenêtre)', links:[{t:'Permis voiture', href:'car.html'}]},
      ]},
      { label:'Juil. 2026', tasks:[
        {txt:'Oulpan Vav – consolidation & lecture authentique', links:[{t:'Oulpan', href:'oulpan.html'}]},
        {txt:'Projet ONG : cadrage final & go/no-go', links:[{t:'ONG', href:'ong.html'}]},
        {txt:'Moto : démarrage (ETM) si souhaité', links:[{t:'Permis moto', href:'moto.html'}]},
      ]},
    ];

    function monthsFrom(start){
      // return slice of baseMonths from chosen start up to July 2026 inclusive
      const [sy, sm] = start.split('-').map(Number);
      const list = baseMonths.filter(x => (x.y>sy || (x.y===sy && x.m>=sm)));
      return list;
    }

    function render(start){
      const tl = document.getElementById('tl');
      const months = monthsFrom(start);
      // slice sequence to match months length (drop what is before start)
      const seqStartIdx = baseMonths.findIndex(x => x.y===Number(start.split('-')[0]) && x.m===Number(start.split('-')[1]));
      const seq = sequence.slice(seqStartIdx);
      // If months shorter than seq, trim; if longer (shouldn't), limit anyway
      const L = Math.min(months.length, seq.length);
      tl.innerHTML = months.slice(0,L).map((m, i)=>{
        const s = seq[i];
        const items = s.tasks.map(t => {
          const links = t.links?.map(l=>`<a class='btn small' href='${l.href}'>${l.t}</a>`).join(' ') || '';
          return `<li>${t.txt}<div class='links'>${links}</div></li>`;
        }).join('');
        return `<div class="tl-item">
          <div class="tl-date">${m.label}</div>
          <div class="tl-card card">
            <div class="section">Objectifs du mois</div>
            <ul>${items}</ul>
          </div>
        </div>`;
      }).join('');
    }

    const startSel = document.getElementById('start');
    render(startSel.value);
    startSel.addEventListener('change', e => render(e.target.value));
  
// mini % script inserted earlier
</script>
</body>
</html>
